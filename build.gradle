apply from: gradle.oshCoreDir + '/common.gradle'
description = ''

allprojects {
    version = "3.0.0"
}

subprojects {
    repositories.addAll(rootProject.repositories)
}

dependencies {
    // FROM OSH-CORE
    implementation 'org.sensorhub:sensorhub-core:' + oshCoreVersion
    implementation 'org.sensorhub:sensorhub-core-osgi:' + oshCoreVersion
    implementation 'org.sensorhub:sensorhub-datastore-h2:' + oshCoreVersion
    implementation 'org.sensorhub:sensorhub-service-swe:' + oshCoreVersion
    implementation 'org.sensorhub:sensorhub-webui-core:' + oshCoreVersion
    // Connected Systems
    implementation 'org.sensorhub:sensorhub-service-consys'

    // FROM OSH-ADDONS
    implementation project(':sensorhub-driver-videocam')
    implementation project(':sensorhub-driver-rtpcam')
    implementation project(':sensorhub-driver-ffmpeg')
    implementation project(':sensorhub-process-ffmpeg')
    implementation project(':sensorhub-service-video')
    implementation project(':sensorhub-datastore-postgis')
    implementation project(':sensorhub-service-fileserver')
//  implementation project(':sensorhub-driver-dahua')
// !!WARNING!! If you need to use the Axis driver, you must ensure the driver has a non-vulnerable version of log4j
//  implementation project(':sensorhub-driver-axis')
//    implementation project(':sensorhub-driver-sony-vb600')

    // FROM OSH-OAKRIDGE-MODULES
    // Drivers
    implementation project(':sensorhub-driver-kromek-d3s')
    implementation project(':sensorhub-driver-rs350')
    implementation project(':sensorhub-driver-rapiscan')
    implementation project(':sensorhub-driver-aspect')
    implementation project(':sensorhub-driver-kromek-d5')

    // Processes

    // Additional Modules
    implementation project(':sensorhub-system-lane')
    implementation project(':sensorhub-webui-oscar')
    implementation project(':sensorhub-service-oscar')
    implementation project(':sensorhub-service-bucket')

    implementation project(':security-utils')

    implementation 'io.sentry:sentry-logback:8.25.0'

    // For MQTT
    implementation project(':sensorhub-service-consys-mqtt')
    implementation project(':sensorhub-service-mqtt-hivemq')
}

configurations {
    rel
    dev
    stable
}

distributions{
    rel {
        distributionBaseName = 'oscar'
        contents {
            // OSH NODE
            into("osh-node-oscar/") {
                from 'dist/scripts/standard'
                from 'dist/config/standard'
            }
            into ("osh-node-oscar/config") {
                from 'dist/config/eml'
            }
            into("osh-node-oscar/trusted_certificates") {
                from 'scripts/trusted_certificates'
            }
            into("osh-node-oscar/rules") {
                from 'dist/rules'
            }
            into("osh-node-oscar/documentation") {
                from 'dist/documentation'
            }
            into("osh-node-oscar/web") {
                from 'web/oscar-viewer/web'
            }
            into("osh-node-oscar/") {
                from 'README.md'
                from 'osh-node-oscar/changelog.md'
            }
            into("osh-node-oscar/lib") {
                from 'third-party-drivers'
                from project.configurations.runtimeClasspath
            }

            // POSTGIS / DOCKER / SCRIPTS
            into('.') {
                from('dist/release')
            }

        }
    }
}

apply from: gradle.oshCoreDir + '/release.gradle'